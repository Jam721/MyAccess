@using MyAccess.Services
<div class="detailed-report vk-style">
    <div class="report-header">
        <h3>Детализированный отчет</h3>
        <div class="report-info">
            <span class="record-count">Записей: @Data.Count</span>
            <span class="timestamp">@DateTime.Now.ToString("dd.MM.yyyy HH:mm")</span>
        </div>
    </div>
    
    <div class="table-container">
        <table class="report-table">
            <thead>
            <tr>
                @foreach (var column in Columns)
                {
                    <th>@column.Name</th>
                }
            </tr>
            </thead>
            <tbody>
            @foreach (var row in Data)
            {
                <tr>
                    @foreach (var column in Columns)
                    {
                        <td>@row[column.Name]?.ToString()</td>
                    }
                </tr>
            }
            </tbody>
        </table>
    </div>
    
    <div class="report-footer">
        <div class="pagination">
            <button class="page-btn">←</button>
            <span class="page-info">1-@Data.Count из @Data.Count</span>
            <button class="page-btn">→</button>
        </div>
    </div>
</div>

<style>
    /* Основные стили VK */
    .vk-style {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        color: #222;
        background: white;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        overflow: hidden;
    }
    
    .report-header {
        padding: 16px 20px;
        background: #f9f9f9;
        border-bottom: 1px solid #e7e8ec;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .report-header h3 {
        margin: 0;
        font-size: 18px;
        font-weight: 500;
        color: #2a5885;
    }
    
    .report-info {
        display: flex;
        gap: 15px;
        font-size: 13px;
        color: #656565;
    }
    
    .table-container {
        overflow-x: auto;
        max-height: 70vh;
    }
    
    .report-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-size: 14px;
    }
    
    .report-table th {
        background-color: #5181b8;
        color: white;
        font-weight: 500;
        text-align: left;
        padding: 12px 15px;
        position: sticky;
        top: 0;
        z-index: 10;
    }
    
    .report-table th:first-child {
        border-top-left-radius: 4px;
    }
    
    .report-table th:last-child {
        border-top-right-radius: 4px;
    }
    
    .report-table td {
        padding: 10px 15px;
        border-bottom: 1px solid #e7e8ec;
        background: white;
    }
    
    .report-table tr:nth-child(even) td {
        background-color: #f9f9f9;
    }
    
    .report-table tr:hover td {
        background-color: #f0f2f5;
    }
    
    .report-footer {
        padding: 12px 20px;
        background: #f9f9f9;
        border-top: 1px solid #e7e8ec;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .pagination {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .page-btn {
        width: 30px;
        height: 30px;
        border: 1px solid #d3d9de;
        border-radius: 4px;
        background: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .page-btn:hover {
        background-color: #f0f2f5;
        border-color: #b8c1cc;
    }
    
    .page-info {
        font-size: 13px;
        color: #656565;
    }
</style>

@code {
    [Parameter]
    public List<Dictionary<string, object>> Data { get; set; }

    [Parameter]
    public List<DatabaseService.ColumnDefinition> Columns { get; set; }
}